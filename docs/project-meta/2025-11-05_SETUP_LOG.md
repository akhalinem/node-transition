# Setup Log - PostgreSQL 18 Installation

**Date**: November 5, 2025  
**Action**: Initial development environment setup  
**System**: macOS (Apple Silicon - ARM64)

---

## Installation Summary

### PostgreSQL 18.0 Installation via Homebrew

**Command Used**:

```bash
brew install postgresql@18
```

**Installation Details**:

- **Version**: PostgreSQL 18.0 (Homebrew)
- **Architecture**: aarch64-apple-darwin25.0.0
- **Compiler**: Apple clang version 17.0.0 (clang-1700.3.19.1)
- **Platform**: 64-bit ARM (Apple Silicon)

**Dependencies Installed**:

- icu4c@77 (77.1) - Unicode support
- krb5 (1.22.1) - Kerberos authentication
- lz4 (1.10.0) - Compression library
- readline (8.3.1) - Command-line editing
- xz (5.8.1) - Data compression
- zstd (1.5.7) - Zstandard compression
- libunistring (1.4.1) - Unicode string library
- gettext (0.26) - Internationalization

**Installation Location**: `/opt/homebrew/Cellar/postgresql@18/`

---

## Service Configuration

**Start Service**:

```bash
brew services start postgresql@18
```

**Result**: Successfully started as background service  
**Launch Agent**: `~/Library/LaunchAgents/homebrew.mxcl.postgresql@18.plist`

**Service Status**:

```bash
brew services list | grep postgresql
# Output: postgresql@18 started akhalinem ~/Library/LaunchAgents/homebrew.mxcl.postgresql@18.plist
```

---

## PATH Configuration

**Issue Encountered**: `psql` command not found after installation

**Solution**: Added PostgreSQL binaries to PATH

```bash
echo 'export PATH="/opt/homebrew/opt/postgresql@18/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc
```

**Result**: `psql` command now accessible globally

---

## Verification Tests

### Version Check

```bash
psql --version
```

**Output**: `psql (PostgreSQL) 18.0 (Homebrew)`

### Connection Test

```bash
psql postgres -c "SELECT version();"
```

**Output**:

```
PostgreSQL 18.0 (Homebrew) on aarch64-apple-darwin25.0.0,
compiled by Apple clang version 17.0.0 (clang-1700.3.19.1), 64-bit
```

### Database Connection

- **Default User**: `akhalinem` (system username)
- **Default Database**: `postgres`
- **Connection**: Successful without password (local peer authentication)

---

## Key Findings

### âœ… Successful Aspects

1. **Homebrew Installation**:

   - Clean installation with no conflicts
   - All dependencies resolved automatically
   - Version 18.0 is the latest stable release

2. **Apple Silicon Compatibility**:

   - Native ARM64 build (no Rosetta translation needed)
   - Optimal performance on M-series chips
   - Compiled with Apple Clang (native toolchain)

3. **Service Management**:

   - Integrated with `brew services` for easy start/stop
   - Auto-starts on login via Launch Agent
   - Clean background process management

4. **Default Security**:
   - Local connections use peer authentication
   - No password required for local user
   - Secure by default for development

### ðŸ“ Configuration Notes

1. **PATH Setup Required**:

   - PostgreSQL@18 is "keg-only" (not symlinked to /usr/local/bin)
   - Manual PATH configuration needed for `psql` command
   - Added to `.zshrc` for persistence

2. **Data Directory**:

   - Location: `/opt/homebrew/var/postgresql@18/`
   - Owned by current user (akhalinem)
   - Permissions: 700 (secure)

3. **Port Configuration**:
   - Default Port: 5432
   - Available for connections on localhost
   - No conflicts with other services

### ðŸŽ¯ Recommendations

1. **For Development**:

   - Current setup is ideal for local development
   - No additional configuration needed for basic usage
   - Can create databases with `createdb` command

2. **For Learning Projects**:

   - Service auto-starts on boot (convenient)
   - Consider `brew services stop postgresql@18` when not in use (saves resources)
   - Data persists across restarts automatically

3. **Future Considerations**:
   - Can switch to Docker in Week 3+ for isolation
   - Current setup suitable for Weeks 1-2 (URL Shortener)
   - Easy to uninstall with `brew uninstall postgresql@18` if needed

---

## Quick Reference Commands

### Service Management

```bash
# Start service
brew services start postgresql@18

# Stop service
brew services stop postgresql@18

# Restart service
brew services restart postgresql@18

# Check status
brew services list | grep postgresql
```

### Database Operations

```bash
# Connect to default database
psql postgres

# Create a database
createdb mydb

# List all databases
psql -l

# Drop a database
dropdb mydb

# Connect to specific database
psql mydb
```

### Common psql Commands (once connected)

```sql
-- List databases
\l

-- List tables
\dt

-- Describe table
\d table_name

-- List users
\du

-- Quit
\q
```

---

## Environment Details

**System Information**:

- OS: macOS 15.0 (Darwin 25.0.0)
- Shell: zsh
- Homebrew: Latest version (auto-updated during install)
- User: akhalinem

**Installation Time**: ~5 minutes (including downloads)

**Disk Space Used**: ~100MB (PostgreSQL + dependencies)

---

## Next Steps

### For URL Shortener Project (Weeks 1-2)

1. **Create Project Database**:

   ```bash
   createdb url_shortener_db
   ```

2. **Install Node.js PostgreSQL Client**:

   ```bash
   npm install pg
   ```

3. **Test Connection from Node.js**:

   ```javascript
   const { Pool } = require("pg");
   const pool = new Pool({
     host: "localhost",
     port: 5432,
     database: "url_shortener_db",
     user: "akhalinem",
   });

   pool.query("SELECT NOW()", (err, res) => {
     console.log(err, res);
     pool.end();
   });
   ```

4. **Create Schema**:
   - Design tables for URL shortener
   - Create migration files
   - Set up indexing strategy

---

## Troubleshooting (if needed)

### If psql command still not found

```bash
# Check installation
brew list postgresql@18

# Verify PATH
echo $PATH | grep postgresql

# Re-add to PATH
export PATH="/opt/homebrew/opt/postgresql@18/bin:$PATH"
```

### If service won't start

```bash
# Check logs
tail -f ~/Library/Logs/Homebrew/postgresql@18/*.log

# Try manual start
postgres -D /opt/homebrew/var/postgresql@18
```

### If connection refused

```bash
# Check if running
ps aux | grep postgres

# Check port
lsof -i :5432

# Restart service
brew services restart postgresql@18
```

---

## Decision Log

### Why PostgreSQL 18?

- âœ… Latest stable version (released Oct 2024)
- âœ… New features: SQL/JSON improvements, better performance
- âœ… Good documentation and community support
- âœ… Production-ready for learning projects

### Why Direct Install vs Docker (for now)?

- âœ… Simpler setup for initial learning
- âœ… Better performance (no virtualization overhead)
- âœ… Focus on Node.js fundamentals first
- âœ… Can switch to Docker in Week 3+ when comfortable

### Why Homebrew?

- âœ… Standard package manager for macOS
- âœ… Easy updates with `brew upgrade`
- âœ… Service management built-in
- âœ… Clean uninstall if needed

---

## References

- PostgreSQL 18 Release Notes: https://www.postgresql.org/docs/18/release-18.html
- Homebrew PostgreSQL Formula: https://formulae.brew.sh/formula/postgresql@18
- PostgreSQL Documentation: https://www.postgresql.org/docs/18/

---

_Installation completed successfully on November 5, 2025_  
_Ready to proceed with URL Shortener project (Weeks 1-2)_
